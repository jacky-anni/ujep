"use strict";(self.webpackChunkujep=self.webpackChunkujep||[]).push([[220],{2648:function(e,r,i){i.d(r,{H:function(){return a}});i(2791);var s=i(745),n=i(184),a=function(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("center",{children:[(0,n.jsx)(s.g4,{height:"90",width:"90",radius:"9",color:"#7d56c2",ariaLabel:"three-dots-loading",wrapperStyle:{display:"block"},visible:!0}),(0,n.jsx)("p",{style:{marginTop:"-30px"},children:"Chargment en cours..."})]})})}},3220:function(e,r,i){i.r(r),i.d(r,{EditUsers:function(){return S}});var s=i(2917),n=(i(2791),i(7689)),a=i(7245),l=i(9375),t=i(5699),o=i(1413),u=i(4165),c=i(5861),d=i(3975),m=i(4570),h=i(1134),v=i(2879),p=i(6403),j=i(3418),x=i(4277),f=i(1724),g=f.Ry().shape({email:f.Z_().email("L'email est invalide").required("Ce champ est obligatoire !"),username:f.Z_().required("Ce champ est obligatoire !"),role_name:f.Z_().required("Ce champ est obligatoire !")}),N=i(184),b=function(e){var r,i,l,t,f,b,Z=e.user,S=(0,h.cI)({resolver:(0,v.X)(g),defaultValues:{email:null===Z||void 0===Z?void 0:Z.person.email,username:null===Z||void 0===Z?void 0:Z.username,role_name:null===Z||void 0===Z?void 0:Z.role.role_name}}),_=S.register,w=S.handleSubmit,C=(S.reset,S.formState.errors),k=(0,s.a)([x.BN],(function(){return(0,a.Rf)()})).data,y=((0,n.s0)(),(0,p.NL)()),E=(0,j.D)(function(){var e=(0,c.Z)((0,u.Z)().mark((function e(r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.uz)(r,Z);case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),{onMutate:function(e){return y.setQueryData([x.BN],(function(){return k.data.map((function(r){return r.id===r.id?e:r}))}))},onSuccess:function(e,r,i){(0,m.F)("success","Utilisateur modifi\xe9 avec succ\xe8s"),y.invalidateQueries([x.BN])}}),L=E.isLoading,q=E.mutate;E.error,E.isError,E.isSuccess;return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("form",{onSubmit:w((function(e){var r={email:e.email,username:e.username,role_name:e.role_name};q(r)})),children:[(0,N.jsxs)("div",{className:"row",children:[(0,N.jsxs)("div",{className:"col-md-6 position-relative mb-2",children:[(0,N.jsx)("label",{children:"Entrer l'email"}),(0,N.jsx)("input",(0,o.Z)((0,o.Z)({},_("email")),{},{className:"form-control",placeholder:"contact@ujep.edu.ht"})),(0,N.jsx)("span",{className:"errors-field",children:null===(r=C.email)||void 0===r||null===(i=r.message)||void 0===i?void 0:i.toString()})]}),(0,N.jsxs)("div",{className:"col-md-6 position-relative mb-2",children:[(0,N.jsx)("label",{children:"Entrer le nom d'utilisateur"}),(0,N.jsx)("input",(0,o.Z)((0,o.Z)({},_("username")),{},{className:"form-control ",placeholder:"@jacky"})),(0,N.jsx)("span",{className:"errors-field",children:null===(l=C.username)||void 0===l||null===(t=l.message)||void 0===t?void 0:t.toString()})]})]}),(0,N.jsx)("div",{className:"row",children:(0,N.jsxs)("div",{className:"col-md-12 position-relative mb-2",children:[(0,N.jsx)("label",{children:"Choisir un role"}),(0,N.jsxs)("select",(0,o.Z)((0,o.Z)({className:"form-control"},_("role_name")),{},{children:[(0,N.jsx)("option",{value:"",children:"Choisir une option"}),(0,N.jsx)("option",{value:"user",children:"Utilisateur"}),(0,N.jsx)("option",{value:"admin",children:"Administrateur"})]})),(0,N.jsx)("span",{className:"errors-field",children:null===(f=C.role_name)||void 0===f||null===(b=f.message)||void 0===b?void 0:b.toString()})]})}),(0,N.jsx)(d.Z,{message:"Soumettre",loading:L})]})})},Z=i(2648),S=function(){var e=(0,n.UO)().user,r=(0,s.a)([x.BN,e],(function(){return(0,a.q$)(e)}),{cacheTime:0}),i=r.data,o=r.isLoading,u=r.isError,c=r.error;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(t.d,{title:"Modifier un utilisateur",img:"users"}),(0,N.jsx)("div",{className:"bg-white",children:(0,N.jsx)("div",{className:"col-md-12 p-2",children:o?(0,N.jsx)(Z.H,{}):u?(0,N.jsx)(l.K,{message:c.response.data.message}):(0,N.jsx)(b,{user:i})})})]})}}}]);
//# sourceMappingURL=220.7306a9f5.chunk.js.map